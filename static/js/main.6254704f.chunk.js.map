{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/Loader/Loader.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/App.js","services/images-api.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Searchbar","onSearch","useState","query","setQuery","className","s","SearchForm","onSubmit","e","preventDefault","type","SearchForm__button","SearchForm__button__label","SearchForm__input","autoComplete","autoFocus","placeholder","onChange","currentTarget","value","trim","Loader","ImageGallery","height","ImageGalleryItem","id","webformatURL","largeImageURL","src","alt","ImageGalleryItem__image","imagesArr","onOpenModal","onClick","target","map","index","Button","onLoadMore","Modal","onClose","children","useEffect","window","addEventListener","onKeyDown","removeEventListener","code","Overlay","App","searchQuery","setSearchQuery","images","setImages","status","setStatus","pageNumber","setPageNumber","showLoadMoreBtn","setShowLoadMoreBtn","showModal","setShowModal","errorMessage","setErrorMessage","setSrc","fetch","then","response","json","catch","error","Promise","reject","fetchImages","data","hits","length","totalPages","Math","ceil","total","usableImageKeysArr","prevImages","scrollTo","top","document","documentElement","scrollHeight","behavior","err","img","includes","dataset","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6254704f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__29Wpp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__LBiba\"};","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Searchbar.module.css';\r\n\r\nexport default function Searchbar({ onSearch }) {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const onChange = e => {\r\n    setQuery(e.currentTarget.value.trim());\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    onSearch(query);\r\n  };\r\n\r\n  return (\r\n    <header className={s.Searchbar}>\r\n      <form className={s.SearchForm} onSubmit={onSubmit}>\r\n        <button type=\"submit\" className={s.SearchForm__button}>\r\n          <span className={s.SearchForm__button__label}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={s.SearchForm__input}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          onChange={onChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSearch: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport s from '../ImageGallery/ImageGallery.module.css';\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n      <li>\r\n        <Skeleton height={260} />\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nexport default function ImageGalleryItem({ id, webformatURL, largeImageURL }) {\r\n  return (\r\n    <img\r\n      id={id}\r\n      src={webformatURL}\r\n      alt=\"\"\r\n      className={s.ImageGalleryItem__image}\r\n      data-src={largeImageURL}\r\n    />\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  webformatURL: PropTypes.string.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport default function ImageGallery({ imagesArr, onOpenModal }) {\r\n  return (\r\n    <ul className={s.ImageGallery} onClick={e => onOpenModal(e.target)}>\r\n      {imagesArr.map(({ id, webformatURL, largeImageURL }, index) => (\r\n        <li key={index} className={s.ImageGalleryItem}>\r\n          <ImageGalleryItem\r\n            id={id}\r\n            webformatURL={webformatURL}\r\n            largeImageURL={largeImageURL}\r\n          />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  imagesArr: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  onOpenModal: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nexport default function Button({ onLoadMore }) {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={onLoadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', onKeyDown);\r\n\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  });\r\n\r\n  const onKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const onClickBackdrop = e => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.Overlay} onClick={onClickBackdrop}>\r\n      <div className={s.Modal}>{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  children: PropTypes.element.isRequired,\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport fetchImages from '../services/images-api';\nimport Searchbar from './Searchbar/Searchbar';\nimport Loader from './Loader/Loader';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Button from './Button/Button';\nimport Modal from './Modal/Modal';\n\nexport default function App() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [status, setStatus] = useState('idle');\n  const [pageNumber, setPageNumber] = useState(1);\n  const [showLoadMoreBtn, setShowLoadMoreBtn] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [src, setSrc] = useState('');\n\n  useEffect(() => {\n    if (!searchQuery) return; //отменяем первый рендер или рендер пустой строки\n\n    setStatus('pending');\n\n    fetchImages(searchQuery, pageNumber)\n      .then(data => {\n        if (data.hits.length === 0) {\n          setStatus('rejected');\n          setErrorMessage('No matches found :(');\n        } else {\n          const totalPages = Math.ceil(data.total / 12);\n          const usableImageKeysArr = data.hits.map(\n            ({ id, webformatURL, largeImageURL }) => {\n              return {\n                id,\n                webformatURL,\n                largeImageURL,\n              };\n            },\n          );\n\n          setImages(prevImages => [...prevImages, ...usableImageKeysArr]);\n          setStatus('resolved');\n          setShowLoadMoreBtn(totalPages === pageNumber ? false : true);\n        }\n\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(err => {\n        setStatus('rejected');\n        setErrorMessage(`There is an error: ${err}`);\n      });\n  }, [searchQuery, pageNumber]);\n\n  const onSearch = query => {\n    setSearchQuery(query);\n    setImages([]);\n    setPageNumber(1);\n  };\n\n  const onOpenModal = img => {\n    if (img.className.includes('ImageGalleryItem__image')) {\n      setShowModal(true);\n      setSrc(img.dataset.src);\n    }\n  };\n\n  const onCloseModal = () => {\n    setShowModal(false);\n    setSrc('');\n  };\n\n  const onLoadMore = () => {\n    setPageNumber(pageNumber + 1);\n    setStatus('pending');\n  };\n\n  return (\n    <>\n      <Searchbar onSearch={onSearch} />\n      {status === 'idle' && <p className=\"Msg\">Enter search query :)</p>}\n      {status === 'pending' && (\n        <>\n          {images.length !== 0 && <ImageGallery imagesArr={images} />}\n          <Loader />\n          <div className=\"loadMoreReplacer\"></div>\n        </>\n      )}\n      {status === 'rejected' && <p className=\"Msg\">{errorMessage}</p>}\n      {status === 'resolved' && (\n        <>\n          <ImageGallery imagesArr={images} onOpenModal={onOpenModal} />\n          {showLoadMoreBtn && <Button onLoadMore={onLoadMore} />}\n        </>\n      )}\n      {showModal && (\n        <Modal onClose={onCloseModal}>\n          <img src={src} alt=\"\" />\n        </Modal>\n      )}\n    </>\n  );\n}\n","const API_KEY = '22963299-57829f6e237632471c998bdfc';\r\n\r\nexport default function fetchImages(query, pageNumber) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${pageNumber}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  )\r\n    .then(response => response.json())\r\n    .catch(error => Promise.reject(error));\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3HXJP\",\"SearchForm\":\"Searchbar_SearchForm__2MtI6\",\"SearchForm__button\":\"Searchbar_SearchForm__button__1mvMy\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__XoulR\",\"SearchForm__input\":\"Searchbar_SearchForm__input__2Y5YL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2wCBn\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__dyTIs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3yl4C\",\"Modal\":\"Modal_Modal__12Yxy\"};"],"sourceRoot":""}